{% extends 'base.html' %}
{% block title %}{{ _('View Password') }} â€“ PQ Vault{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">ğŸ‘ {{ _('View Password') }}</h1>
        <p class="page-sub">{{ entry.website }}</p>
    </div>
    <a href="{{ url_for('main.index') }}" class="btn btn-ghost">â† {{ _('Back') }}</a>
</div>

<div class="form-card">
    <div class="form-group">
        <label class="form-label">ğŸŒ {{ _('Website') }}</label>
        <div class="form-input readonly">{{ entry.website }}</div>
    </div>
    <div class="form-group">
        <label class="form-label">ğŸ‘¤ {{ _('Username') }}</label>
        <div class="form-input readonly">{{ entry.username or 'â€”' }}</div>
    </div>
    <div class="form-group">
        <label class="form-label">ğŸ”‘ {{ _('Password') }}</label>
        <div class="input-group">
            <input type="password" id="pwd-reveal" class="form-input" value="{{ password }}" readonly>
            <button class="btn btn-ghost" onclick="toggleReveal()">ğŸ‘</button>
            <button class="btn btn-ghost" onclick="copyPwd()">ğŸ“‹</button>
        </div>
    </div>
    {% if entry.notes %}
    <div class="form-group">
        <label class="form-label">ğŸ“ {{ _('Notes') }}</label>
        <div class="form-input readonly" style="white-space:pre-wrap">{{ entry.notes }}</div>
    </div>
    {% endif %}
    <div style="display:flex;gap:.75rem;margin-top:1.5rem">
        <a href="{{ url_for('main.edit_password', entry_id=entry.id) }}" class="btn btn-primary">âœï¸ {{ _('Edit') }}</a>
        <a href="{{ url_for('main.share_password', entry_id=entry.id) }}" class="btn btn-ghost">ğŸ”— {{ _('Share') }}</a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function toggleReveal() {
        const i = document.getElementById('pwd-reveal');
        i.type = i.type === 'password' ? 'text' : 'password';
    }
    function copyPwd() {
        navigator.clipboard.writeText(document.getElementById('pwd-reveal').value)
            .then(() => { const b = event.target; b.textContent = 'âœ…'; setTimeout(() => b.textContent = 'ğŸ“‹', 1500); });
    }
</script>
{% endblock %}