{% extends 'base.html' %}
{% block title %}{{ _('Edit Password') }} â€“ PQ Vault{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">âœï¸ {{ _('Edit Password') }}</h1>
        <p class="page-sub">{{ entry.website }}</p>
    </div>
    <a href="{{ url_for('main.index') }}" class="btn btn-ghost">â† {{ _('Back') }}</a>
</div>

<div class="form-card">
    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="form-group">
            <label class="form-label">ğŸŒ {{ _('Website') }}</label>
            <input type="text" name="website" class="form-control" value="{{ entry.website }}" required>
        </div>

        <div class="form-group">
            <label class="form-label">ğŸ‘¤ {{ _('Username / Email') }}</label>
            <input type="text" name="username" class="form-control" value="{{ entry.username or '' }}">
        </div>

        <div class="form-group">
            <label class="form-label">
                ğŸ”‘ {{ _('New Password') }}
                <span style="opacity:.5;font-weight:400">({{ _('leave blank to keep current') }})</span>
            </label>
            <div class="password-input-wrapper" style="margin-bottom:.5rem">
                <input type="password" name="password" id="password-input" class="form-control"
                    placeholder="{{ _('Leave blank to keep existing password') }}">
                <button type="button" class="toggle-password">ğŸ‘</button>
            </div>
            <div style="display:flex;gap:.5rem;margin-bottom:.5rem">
                <button type="button" id="generate-btn" class="btn btn-ghost btn-sm">
                    âš¡ {{ _('Generate') }}
                </button>
                <label
                    style="display:flex;align-items:center;gap:.4rem;font-size:.8rem;color:var(--text-2);margin:0;cursor:pointer">
                    <input type="checkbox" id="gen-symbols" checked> {{ _('Symbols') }}
                </label>
                <input type="number" id="gen-length" value="20" min="8" max="64" class="form-control"
                    style="width:70px;padding:.3rem .5rem;font-size:.8rem">
            </div>
            <div class="strength-bar">
                <div id="strength-fill" class="strength-fill" style="width:0"></div>
            </div>
            <div style="display:flex;justify-content:space-between;margin-top:.3rem">
                <span id="strength-label" style="font-size:.7rem;color:var(--text-3)"></span>
                <span id="crack-time" style="font-size:.7rem;color:var(--text-3)"></span>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">ğŸ“ {{ _('Notes') }}</label>
            <textarea name="notes" class="form-control" rows="3">{{ entry.notes or '' }}</textarea>
        </div>

        <div style="display:flex;gap:.75rem;justify-content:flex-end;margin-top:1.5rem">
            <a href="{{ url_for('main.index') }}" class="btn btn-ghost">{{ _('Cancel') }}</a>
            <button type="submit" class="btn btn-primary">ğŸ’¾ {{ _('Save Changes') }}</button>
        </div>
    </form>
</div>
{% endblock %}